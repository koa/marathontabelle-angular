<table mat-table [dataSource]="sortedCompetitors" matSort class="mat-elevation-z8">
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
    <td mat-cell *matCellDef="let competitor">
      <mat-form-field>
        <input matInput [(ngModel)]="competitor.name" (keyup.enter)="updateCompetitor(competitor)"
               (blur)="updateCompetitor(competitor)">
      </mat-form-field>
    </td>
    <td mat-footer-cell *matFooterCellDef>
      <mat-form-field>
        <input matInput [(ngModel)]="newCompetitor.name">
      </mat-form-field>
    </td>
  </ng-container>
  <ng-container matColumnDef="category">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Kategorie</th>
    <td mat-cell *matCellDef="let competitor">
      <mat-form-field>
        <mat-select [(ngModel)]="competitor.category" (selectionChange)="updateCompetitor(competitor)">
          <mat-option *ngFor="let category of categories" [value]="category.name">{{category.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </td>
    <td mat-footer-cell *matFooterCellDef>
      <mat-form-field>
        <mat-select [(ngModel)]="newCompetitor.category">
          <mat-option *ngFor="let category of categories" [value]="category.name">{{category.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </td>
  </ng-container>
  <ng-container matColumnDef="startPhaseA">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Phase A</th>
    <td mat-cell *matCellDef="let competitor">
      <mat-form-field>
        <input matInput type="time"
               (keyup.enter)="competitor.startPhaseA=str2time($event.target.value);updateCompetitor(competitor)"
               (blur)="competitor.startPhaseA=str2time($event.target.value);updateCompetitor(competitor)"
               [ngModel]="time2str(competitor.startPhaseA)">
      </mat-form-field>
    </td>
    <td mat-footer-cell *matFooterCellDef>
      <mat-form-field>
        <input matInput type="time"
               (keyup.enter)="newCompetitor.startPhaseA=str2time($event.target.value)"
               (blur)="newCompetitor.startPhaseA=str2time($event.target.value)"
               [ngModel]="time2str(newCompetitor.startPhaseA)">
      </mat-form-field>
    </td>
  </ng-container>
  <ng-container matColumnDef="startPhaseTransfer">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Phase Transfer</th>
    <td mat-cell *matCellDef="let competitor">
      <mat-form-field>
        <input matInput type="time"
               (keyup.enter)="competitor.startPhaseTransfer=str2time($event.target.value);updateCompetitor(competitor)"
               (blur)="competitor.startPhaseTransfer=str2time($event.target.value);updateCompetitor(competitor)"
               [ngModel]="time2str(competitor.startPhaseTransfer)">
      </mat-form-field>
    </td>
    <td mat-footer-cell *matFooterCellDef>
      <mat-form-field>
        <input matInput type="time"
               (keyup.enter)="newCompetitor.startPhaseTransfer=str2time($event.target.value)"
               (blur)="newCompetitor.startPhaseTransfer=str2time($event.target.value)"
               [ngModel]="time2str(newCompetitor.startPhaseTransfer)">
      </mat-form-field>
    </td>
  </ng-container>
  <ng-container matColumnDef="startPhaseB">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Phase B</th>
    <td mat-cell *matCellDef="let competitor">
      <mat-form-field>
        <input matInput type="time"
               (keyup.enter)="competitor.startPhaseB=str2time($event.target.value);updateCompetitor(competitor)"
               (blur)="competitor.startPhaseB=str2time($event.target.value);updateCompetitor(competitor)"
               [ngModel]="time2str(competitor.startPhaseB)">
      </mat-form-field>
    </td>
    <td mat-footer-cell *matFooterCellDef>
      <mat-form-field>
        <input matInput type="time"
               (keyup.enter)="newCompetitor.startPhaseB=str2time($event.target.value)"
               (blur)="newCompetitor.startPhaseB=str2time($event.target.value)"
               [ngModel]="time2str(newCompetitor.startPhaseB)">
      </mat-form-field>
    </td>
  </ng-container>
  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let competitor">
      <button mat-icon-button (click)="delete(competitor)">
        <mat-icon>delete</mat-icon>
      </button>
    </td>
    <td mat-footer-cell *matFooterCellDef>
      <button mat-icon-button (click)="add(newCompetitor)">
        <mat-icon>add</mat-icon>
      </button>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
</table>
